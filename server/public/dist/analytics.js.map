{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BASE_URL","defaultOptions","headers","BaseEvent","Analytics","registerClicks","Content-Type","token","_classCallCheck","this","PageID","_createClass","userAgent","navigator","browser","isOpera","window","opr","addons","opera","indexOf","isFirefox","InstallTrigger","isSafari","test","HTMLElement","safari","pushNotification","toString","isIE","document","documentMode","StyleMedia","chrome","webstore","runtime","ID","pageID","localStorage","setItem","getItem","self","fetch","method","body","JSON","stringify","page","user","getUserID","then","resp","json","options","userID","setUserID","setPageID","location","href","origin","arguments","length","undefined","setInitOptions","init","requestInitData","getPageID","_init$getBrowserData","getBrowserData","data","timestamp","Date","now","url","getPageURL","event","assign","addEventListener","e","type","x","y","_screen","screen","width","height","emit","al","a","_len","args","Array","_key","apply","ANALYTICS_OPTIONS"],"mappings":"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","file":"analytics.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","(() => {\r\n  const BASE_URL = 'http://localhost:3000/';\r\n  const defaultOptions = { registerClicks: false };\r\n  const defaultEvent = 'Init';\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n    'token': '6i2nSgWu0DfYIE8I0ZBJOtxTmHJATRzu',\r\n  };\r\n\r\n  class BaseEvent {\r\n    constructor() {\r\n      this.PageID = null;\r\n    }\r\n\r\n    getBrowserData() {\r\n      const userAgent = navigator.userAgent;\r\n      var browser = '';\r\n\r\n      // Opera 8.0+\r\n      var isOpera = (!!window.opr && !!opr.addons) || !!window.opera ||\r\n        navigator.userAgent.indexOf(' OPR/') >= 0;\r\n      // Firefox 1.0+\r\n      var isFirefox = typeof InstallTrigger !== 'undefined';\r\n      // Safari 3.0+ \"[object HTMLElementConstructor]\"\r\n      var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) {\r\n          return p.toString() === '[object SafariRemoteNotification]';\r\n        })(!window['safari'] ||\r\n          (typeof safari !== 'undefined' && safari.pushNotification));\r\n      // Internet Explorer 6-11\r\n      var isIE = /*@cc_on!@*/false || !!document.documentMode;\r\n      // Edge 20+\r\n      var isEdge = !isIE && !!window.StyleMedia;\r\n      // Chrome 1 - 71\r\n      var isChrome = !!window.chrome &&\r\n        (!!window.chrome.webstore || !!window.chrome.runtime);\r\n\r\n      if (isOpera) browser = 'Opera';\r\n      if (isFirefox) browser = 'Firefox';\r\n      if (isSafari) browser = 'Safari';\r\n      if (isIE) browser = 'Internet Explorer';\r\n      if (isEdge) browser = 'Edge';\r\n      if (isChrome) browser = 'Chrome';\r\n\r\n      return { userAgent, browser };\r\n    }\r\n\r\n    setPageID(ID) {\r\n      this.pageID = ID;\r\n    }\r\n\r\n    getPageID() {\r\n      return this.pageID;\r\n    }\r\n\r\n    setUserID(ID) {\r\n      localStorage.setItem('_a_user_id', ID);\r\n    }\r\n\r\n    getUserID() {\r\n      return localStorage.getItem('_a_user_id');\r\n    }\r\n\r\n    requestInitData() {\r\n      let self = this;\r\n      return fetch(BASE_URL + 'init', {\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify({ page: !self.pageID, user: !self.getUserID() }),\r\n      })\r\n        .then(resp => {\r\n          return resp.json();\r\n        })\r\n        .then(function (options) {\r\n          if (options.userID)\r\n            self.setUserID(options.userID)\r\n          if (options.pageID)\r\n            self.setPageID(options.pageID)\r\n        })\r\n    }\r\n\r\n    getPageURL() {\r\n      return location.href;\r\n    }\r\n\r\n    getSite() {\r\n      return location.origin;\r\n    }\r\n\r\n  }\r\n\r\n  class Analytics {\r\n    constructor() {\r\n      this.options = {};\r\n      this.userID = null;\r\n      this.pageID = null;\r\n    }\r\n\r\n    init(options = defaultOptions) {\r\n      const self = this;\r\n      self.setInitOptions(options);\r\n\r\n      let init = new BaseEvent();\r\n\r\n      return init.requestInitData()\r\n        .then(() => {\r\n          const userID = self.userID = init.getUserID();\r\n          const pageID = self.pageID = init.getPageID();\r\n\r\n          const { userAgent, browser } = init.getBrowserData();\r\n          const timestamp = Date.now();\r\n          const url = init.getPageURL()\r\n\r\n          const data = { userAgent, userID, timestamp, url, browser, pageID };\r\n          return fetch(BASE_URL + 'collect', {\r\n            method: 'POST',\r\n            headers: headers,\r\n            body: JSON.stringify({ event: 'init', options: data }),\r\n          })\r\n        })\r\n        .then(() => {\r\n          if (self.options.registerClicks) self.registerClicks();\r\n        })\r\n    }\r\n\r\n    setInitOptions(options) {\r\n      this.options = Object.assign({}, defaultOptions, options);\r\n    }\r\n\r\n    emit(event = defaultEvent, options = {}) {\r\n      const timestamp = Date.now();\r\n      options = Object.assign(options,\r\n        { userID: this.userID, pageID: this.pageID, timestamp });\r\n      const data = { event, options };\r\n\r\n      return fetch(BASE_URL + 'collect', {\r\n        method: 'POST',\r\n        headers: headers,\r\n        body: JSON.stringify(data),\r\n      })\r\n    }\r\n\r\n    registerClicks() {\r\n      const self = this;\r\n      document.addEventListener('click', function (e) {\r\n        const { type, x, y } = e;\r\n        const { width, height } = screen;\r\n        self.emit('click', { type, x, y, width, height })\r\n      }, false);\r\n    }\r\n\r\n  }\r\n\r\n  window.al = function (...args) {\r\n    this.a = this.a || new Analytics();\r\n    if (!args.length) {\r\n      this.a.init(typeof window.ANALYTICS_OPTIONS != 'undefined'\r\n        ? window.ANALYTICS_OPTIONS\r\n        : undefined);\r\n    } else {\r\n      this.a.emit.apply(this.a, args);\r\n    }\r\n  };\r\n  al();\r\n\r\n})();\r\n"],"sourceRoot":""}